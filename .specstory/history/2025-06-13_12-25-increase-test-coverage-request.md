<!-- Generated by SpecStory -->

# Increase test coverage request (2025-06-13 22:25:09)

_**User**_

please increase the test coverage

---

_**Assistant**_



---

I'll help you increase the test coverage for your project. Let me start by exploring the codebase structure to understand the current state of testing.

---

<details>
            <summary>Listed current directory â€¢ **32** results</summary>
        
| Name |
|-------|
| ğŸ“ `.git` |
| ğŸ“ `UniversalSerializer.Test` |
| ğŸ“„ `CHANGELOG.md` |
| ğŸ“„ `Directory.Packages.props` |
| ğŸ“ `scripts` |
| ğŸ“„ `global.json` |
| ğŸ“„ `COPYRIGHT.md` |
| ğŸ“„ `.gitignore` |
| ğŸ“„ `.editorconfig` |
| ğŸ“ `UniversalSerializer.Benchmarks` |
| ğŸ“ `UniversalSerializer` |
| ğŸ“„ `VERSION.md` |
| ğŸ“„ `PROJECT_URL.url` |
| ğŸ“„ `LICENSE.md` |
| ğŸ“„ `AUTHORS.url` |
| ğŸ“„ `AUTHORS.md` |
| ğŸ“„ `.runsettings` |
| ğŸ“„ `fix_usings.ps1` |
| ğŸ“ `.specstory` |
| ğŸ“„ `.cursorignore` |
| ğŸ“ `.cursor` |
| ğŸ“„ `.cursorindexingignore` |
| ğŸ“ `docs` |
| ğŸ“ `.obsidian` |
| ğŸ“„ `.mailmap` |
| ğŸ“„ `.gitattributes` |
| ğŸ“„ `DESCRIPTION.md` |
| ğŸ“„ `README.md` |
| ğŸ“ `.vs` |
| ğŸ“„ `UniversalSerializer.sln` |
| ğŸ“ `.github` |
| ğŸ“„ `icon.png` |

</details>

---

Now let me explore the test directory and the main project to understand the current testing setup:

---

<details>
            <summary>Listed directory UniversalSerializer.Test â€¢ **5** results</summary>
        
| Name |
|-------|
| ğŸ“„ `SerializerTests.cs` |
| ğŸ“„ `UniversalSerializer.Test.csproj` |
| ğŸ“„ `TypeConverterTests.cs` |
| ğŸ“ `obj` |
| ğŸ“ `bin` |

</details>

---

<details>
            <summary>Listed directory UniversalSerializer â€¢ **4** results</summary>
        
| Name |
|-------|
| ğŸ“ `obj` |
| ğŸ“„ `UniversalSerializer.csproj` |
| ğŸ“ `Serialization` |
| ğŸ“ `bin` |

</details>

---

Let me examine the main source code structure:

---

<details>
            <summary>Listed directory UniversalSerializer/Serialization â€¢ **24** results</summary>
        
| Name |
|-------|
| ğŸ“„ `SerializerRegistry.cs` |
| ğŸ“„ `SerializerOptions.cs` |
| ğŸ“„ `SerializerFactory.cs` |
| ğŸ“„ `SerializerExtensions.cs` |
| ğŸ“ `Compression` |
| ğŸ“„ `SerializerResolver.cs` |
| ğŸ“„ `SerializerOptionKeys.cs` |
| ğŸ“„ `SerializerBase.cs` |
| ğŸ“„ `ISerializerFactory.cs` |
| ğŸ“„ `ISerializerResolver.cs` |
| ğŸ“ `Toml` |
| ğŸ“ `Yaml` |
| ğŸ“ `TypeConverter` |
| ğŸ“ `TypeRegistry` |
| ğŸ“ `Xml` |
| ğŸ“ `Json` |
| ğŸ“ `MessagePack` |
| ğŸ“„ `EnumSerializationFormat.cs` |
| ğŸ“ `DependencyInjection` |
| ğŸ“„ `SerializerDefaults.cs` |
| ğŸ“„ `ISerializer.cs` |
| ğŸ“ `Security` |
| ğŸ“„ `CompressionType.cs` |
| ğŸ“ `Ini` |

</details>

---



---

Now let me look at the existing test files to understand the current test coverage and framework being used:

---

Read file: UniversalSerializer.Test/SerializerTests.cs

---

Read file: UniversalSerializer.Test/TypeConverterTests.cs

---

Read file: UniversalSerializer.Test/UniversalSerializer.Test.csproj

---



---

Now let me examine some of the core source files to understand what functionality needs more test coverage:

---

Read file: UniversalSerializer/Serialization/SerializerRegistry.cs

---

Read file: UniversalSerializer/Serialization/SerializerOptions.cs

---

Read file: UniversalSerializer/Serialization/SerializerExtensions.cs

---



---

Now let me check what other subdirectories exist in the Serialization folder to understand all the components:

---

<details>
            <summary>Listed directory UniversalSerializer/Serialization/TypeRegistry â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `TypeRegistry.cs` |
| ğŸ“„ `TypeDiscriminatorFormat.cs` |

</details>

---

<details>
            <summary>Listed directory UniversalSerializer/Serialization/Security â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `IEncryptionProvider.cs` |
| ğŸ“„ `EncryptionType.cs` |

</details>

---



---

Based on my exploration of the codebase, I can see that the current test coverage is quite limited. The existing tests only cover:

1. Basic serialization/deserialization functionality for different formats
2. Basic type converter functionality
3. Registry registration functionality

There are many areas that need more comprehensive test coverage. Let me create additional test files to improve the coverage:

---

```diff
- 
+ // Copyright (c) ktsu.dev
+ // All rights reserved.
+ // Licensed under the MIT license.
+ 
+ namespace ktsu.UniversalSerializer.Test;
+ 
+ using ktsu.UniversalSerializer.Serialization;
+ using Microsoft.VisualStudio.TestTools.UnitTesting;
+ 
+ /// <summary>
+ /// Tests for the SerializerOptions class.
+ /// </summary>
+ [TestClass]
+ public class SerializerOptionsTests
+ {
+ 	/// <summary>
+ 	/// Tests setting and getting options.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_SetAndGetOption_Success()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		
+ 		// Act
+ 		options.SetOption("TestKey", "TestValue");
+ 		string? result = options.GetOption<string>("TestKey");
+ 		
+ 		// Assert
+ 		Assert.AreEqual("TestValue", result);
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests getting option with default value.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_GetOptionWithDefault_ReturnsDefault()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		
+ 		// Act
+ 		string result = options.GetOption("NonExistentKey", "DefaultValue");
+ 		
+ 		// Assert
+ 		Assert.AreEqual("DefaultValue", result);
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests getting option with default value when option exists.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_GetOptionWithDefault_ReturnsActualValue()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		options.SetOption("TestKey", "ActualValue");
+ 		
+ 		// Act
+ 		string result = options.GetOption("TestKey", "DefaultValue");
+ 		
+ 		// Assert
+ 		Assert.AreEqual("ActualValue", result);
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests TryGetOption method.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_TryGetOption_Success()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		options.SetOption("TestKey", 42);
+ 		
+ 		// Act
+ 		bool success = options.TryGetOption<int>("TestKey", out int value);
+ 		
+ 		// Assert
+ 		Assert.IsTrue(success);
+ 		Assert.AreEqual(42, value);
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests TryGetOption method with non-existent key.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_TryGetOption_NonExistentKey_ReturnsFalse()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		
+ 		// Act
+ 		bool success = options.TryGetOption<int>("NonExistentKey", out int value);
+ 		
+ 		// Assert
+ 		Assert.IsFalse(success);
+ 		Assert.AreEqual(0, value);
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests HasOption method.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_HasOption_ReturnsCorrectValue()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		options.SetOption("TestKey", "TestValue");
+ 		
+ 		// Act & Assert
+ 		Assert.IsTrue(options.HasOption("TestKey"));
+ 		Assert.IsFalse(options.HasOption("NonExistentKey"));
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests RemoveOption method.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_RemoveOption_Success()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		options.SetOption("TestKey", "TestValue");
+ 		
+ 		// Act
+ 		bool removed = options.RemoveOption("TestKey");
+ 		
+ 		// Assert
+ 		Assert.IsTrue(removed);
+ 		Assert.IsFalse(options.HasOption("TestKey"));
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests RemoveOption method with non-existent key.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_RemoveOption_NonExistentKey_ReturnsFalse()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		
+ 		// Act
+ 		bool removed = options.RemoveOption("NonExistentKey");
+ 		
+ 		// Assert
+ 		Assert.IsFalse(removed);
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests Clear method.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_Clear_RemovesAllOptions()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		options.SetOption("Key1", "Value1");
+ 		options.SetOption("Key2", "Value2");
+ 		
+ 		// Act
+ 		options.Clear();
+ 		
+ 		// Assert
+ 		Assert.AreEqual(0, options.Count);
+ 		Assert.IsFalse(options.HasOption("Key1"));
+ 		Assert.IsFalse(options.HasOption("Key2"));
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests Count property.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_Count_ReturnsCorrectValue()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		
+ 		// Act & Assert
+ 		Assert.AreEqual(0, options.Count);
+ 		
+ 		options.SetOption("Key1", "Value1");
+ 		Assert.AreEqual(1, options.Count);
+ 		
+ 		options.SetOption("Key2", "Value2");
+ 		Assert.AreEqual(2, options.Count);
+ 		
+ 		options.RemoveOption("Key1");
+ 		Assert.AreEqual(1, options.Count);
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests Clone method.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_Clone_CreatesIndependentCopy()
+ 	{
+ 		// Arrange
+ 		SerializerOptions original = new();
+ 		original.SetOption("Key1", "Value1");
+ 		original.SetOption("Key2", 42);
+ 		original.EnableCompression = true;
+ 		original.CompressionLevel = 9;
+ 		
+ 		// Act
+ 		SerializerOptions clone = original.Clone();
+ 		
+ 		// Assert
+ 		Assert.AreEqual(original.Count, clone.Count);
+ 		Assert.AreEqual("Value1", clone.GetOption<string>("Key1"));
+ 		Assert.AreEqual(42, clone.GetOption<int>("Key2"));
+ 		Assert.AreEqual(original.EnableCompression, clone.EnableCompression);
+ 		Assert.AreEqual(original.CompressionLevel, clone.CompressionLevel);
+ 		
+ 		// Verify independence
+ 		clone.SetOption("Key3", "Value3");
+ 		Assert.IsFalse(original.HasOption("Key3"));
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests Default method.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_Default_ReturnsNewInstance()
+ 	{
+ 		// Act
+ 		SerializerOptions options1 = SerializerOptions.Default();
+ 		SerializerOptions options2 = SerializerOptions.Default();
+ 		
+ 		// Assert
+ 		Assert.IsNotNull(options1);
+ 		Assert.IsNotNull(options2);
+ 		Assert.AreNotSame(options1, options2);
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests default property values.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_DefaultValues_AreCorrect()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		
+ 		// Assert
+ 		Assert.IsTrue(options.UseStringConversionForUnsupportedTypes);
+ 		Assert.IsFalse(options.EnableTypeDiscriminator);
+ 		Assert.AreEqual(TypeDiscriminatorFormat.Property, options.TypeDiscriminatorFormat);
+ 		Assert.AreEqual("$type", options.TypeDiscriminatorPropertyName);
+ 		Assert.IsFalse(options.UseFullyQualifiedTypeNames);
+ 		Assert.IsFalse(options.EnableCompression);
+ 		Assert.AreEqual(CompressionType.GZip, options.CompressionType);
+ 		Assert.AreEqual(6, options.CompressionLevel);
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests method chaining with SetOption.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_SetOption_SupportsMethodChaining()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		
+ 		// Act
+ 		SerializerOptions result = options
+ 			.SetOption("Key1", "Value1")
+ 			.SetOption("Key2", 42)
+ 			.SetOption("Key3", true);
+ 		
+ 		// Assert
+ 		Assert.AreSame(options, result);
+ 		Assert.AreEqual(3, options.Count);
+ 		Assert.AreEqual("Value1", options.GetOption<string>("Key1"));
+ 		Assert.AreEqual(42, options.GetOption<int>("Key2"));
+ 		Assert.AreEqual(true, options.GetOption<bool>("Key3"));
+ 	}
+ 	
+ 	/// <summary>
+ 	/// Tests type safety with wrong type casting.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerOptions_GetOption_WrongType_ReturnsDefault()
+ 	{
+ 		// Arrange
+ 		SerializerOptions options = new();
+ 		options.SetOption("StringKey", "StringValue");
+ 		
+ 		// Act
+ 		int result = options.GetOption<int>("StringKey");
+ 		
+ 		// Assert
+ 		Assert.AreEqual(0, result); // Default value for int
+ 	}
+ } 
```

---



---



---



---



---



---

```diff
- 
+ // Copyright (c) ktsu.dev
+ // All rights reserved.
+ // Licensed under the MIT license.
+ 
+ namespace ktsu.UniversalSerializer.Test;
+ 
+ using System;
+ using ktsu.UniversalSerializer.Serialization;
+ using ktsu.UniversalSerializer.Serialization.Json;
+ using ktsu.UniversalSerializer.Serialization.Xml;
+ using Microsoft.VisualStudio.TestTools.UnitTesting;
+ 
+ /// <summary>
+ /// Tests for the SerializerFactory class.
+ /// </summary>
+ [TestClass]
+ public class SerializerFactoryTests
+ {
+ 	private SerializerFactory _factory = null!;
+ 
+ 	/// <summary>
+ 	/// Initializes the test environment.
+ 	/// </summary>
+ 	[TestInitialize]
+ 	public void Initialize()
+ 	{
+ 		_factory = new SerializerFactory();
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests RegisterSerializer method with valid factory function.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_RegisterSerializer_ValidFactory_Success()
+ 	{
+ 		// Act
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 
+ 		// Assert - No exception should be thrown
+ 		JsonSerializer serializer = _factory.Create<JsonSerializer>();
+ 		Assert.IsNotNull(serializer);
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests RegisterSerializer method with null factory throws ArgumentNullException.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_RegisterSerializer_NullFactory_ThrowsArgumentNullException()
+ 	{
+ 		// Act & Assert
+ 		Assert.ThrowsException<ArgumentNullException>(() =>
+ 			_factory.RegisterSerializer<JsonSerializer>(null!));
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests Create method with default options.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Create_DefaultOptions_Success()
+ 	{
+ 		// Arrange
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 
+ 		// Act
+ 		JsonSerializer serializer = _factory.Create<JsonSerializer>();
+ 
+ 		// Assert
+ 		Assert.IsNotNull(serializer);
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests Create method with custom options.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Create_CustomOptions_Success()
+ 	{
+ 		// Arrange
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 		SerializerOptions customOptions = SerializerOptions.Default();
+ 		customOptions.EnableCompression = true;
+ 
+ 		// Act
+ 		JsonSerializer serializer = _factory.Create<JsonSerializer>(customOptions);
+ 
+ 		// Assert
+ 		Assert.IsNotNull(serializer);
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests Create method with unregistered serializer type throws InvalidOperationException.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Create_UnregisteredType_ThrowsInvalidOperationException()
+ 	{
+ 		// Act & Assert
+ 		Assert.ThrowsException<InvalidOperationException>(() =>
+ 			_factory.Create<JsonSerializer>());
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests Create method with null options uses default options.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Create_NullOptions_UsesDefault()
+ 	{
+ 		// Arrange
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 
+ 		// Act
+ 		JsonSerializer serializer = _factory.Create<JsonSerializer>(null);
+ 
+ 		// Assert
+ 		Assert.IsNotNull(serializer);
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests that Create method returns new instances each time.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Create_ReturnsNewInstances()
+ 	{
+ 		// Arrange
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 
+ 		// Act
+ 		JsonSerializer serializer1 = _factory.Create<JsonSerializer>();
+ 		JsonSerializer serializer2 = _factory.Create<JsonSerializer>();
+ 
+ 		// Assert
+ 		Assert.IsNotNull(serializer1);
+ 		Assert.IsNotNull(serializer2);
+ 		Assert.AreNotSame(serializer1, serializer2);
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests registering multiple serializer types.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_RegisterMultipleTypes_Success()
+ 	{
+ 		// Arrange
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 		_factory.RegisterSerializer(options => new XmlSerializer(options));
+ 
+ 		// Act
+ 		JsonSerializer jsonSerializer = _factory.Create<JsonSerializer>();
+ 		XmlSerializer xmlSerializer = _factory.Create<XmlSerializer>();
+ 
+ 		// Assert
+ 		Assert.IsNotNull(jsonSerializer);
+ 		Assert.IsNotNull(xmlSerializer);
+ 		Assert.AreNotEqual(jsonSerializer.GetType(), xmlSerializer.GetType());
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests IsRegistered method.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_IsRegistered_ReturnsCorrectValue()
+ 	{
+ 		// Act & Assert - Before registration
+ 		Assert.IsFalse(_factory.IsRegistered<JsonSerializer>());
+ 
+ 		// Register and test again
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 		Assert.IsTrue(_factory.IsRegistered<JsonSerializer>());
+ 		Assert.IsFalse(_factory.IsRegistered<XmlSerializer>());
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests registering same type twice overwrites previous registration.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_RegisterSameTypeTwice_OverwritesPrevious()
+ 	{
+ 		// Arrange
+ 		bool firstFactoryCalled = false;
+ 		bool secondFactoryCalled = false;
+ 
+ 		_factory.RegisterSerializer(options =>
+ 		{
+ 			firstFactoryCalled = true;
+ 			return new JsonSerializer(options);
+ 		});
+ 
+ 		_factory.RegisterSerializer(options =>
+ 		{
+ 			secondFactoryCalled = true;
+ 			return new JsonSerializer(options);
+ 		});
+ 
+ 		// Act
+ 		JsonSerializer serializer = _factory.Create<JsonSerializer>();
+ 
+ 		// Assert
+ 		Assert.IsNotNull(serializer);
+ 		Assert.IsFalse(firstFactoryCalled);
+ 		Assert.IsTrue(secondFactoryCalled);
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests that factory function receives correct options.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Create_PassesCorrectOptions()
+ 	{
+ 		// Arrange
+ 		SerializerOptions receivedOptions = null!;
+ 		SerializerOptions expectedOptions = SerializerOptions.Default();
+ 		expectedOptions.EnableCompression = true;
+ 
+ 		_factory.RegisterSerializer(options =>
+ 		{
+ 			receivedOptions = options;
+ 			return new JsonSerializer(options);
+ 		});
+ 
+ 		// Act
+ 		JsonSerializer serializer = _factory.Create<JsonSerializer>(expectedOptions);
+ 
+ 		// Assert
+ 		Assert.IsNotNull(serializer);
+ 		Assert.AreSame(expectedOptions, receivedOptions);
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests factory function that returns null throws InvalidOperationException.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_FactoryReturnsNull_ThrowsInvalidOperationException()
+ 	{
+ 		// Arrange
+ 		_factory.RegisterSerializer<JsonSerializer>(options => null!);
+ 
+ 		// Act & Assert
+ 		Assert.ThrowsException<InvalidOperationException>(() =>
+ 			_factory.Create<JsonSerializer>());
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests factory function that throws exception propagates the exception.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_FactoryThrowsException_PropagatesException()
+ 	{
+ 		// Arrange
+ 		ArgumentException expectedException = new("Test exception");
+ 		_factory.RegisterSerializer<JsonSerializer>(options => throw expectedException);
+ 
+ 		// Act & Assert
+ 		ArgumentException actualException = Assert.ThrowsException<ArgumentException>(() =>
+ 			_factory.Create<JsonSerializer>());
+ 		Assert.AreSame(expectedException, actualException);
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests Create method with interface type.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Create_InterfaceType_ThrowsInvalidOperationException()
+ 	{
+ 		// Act & Assert
+ 		Assert.ThrowsException<InvalidOperationException>(() =>
+ 			_factory.Create<ISerializer>());
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests GetRegisteredTypes method.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_GetRegisteredTypes_ReturnsCorrectTypes()
+ 	{
+ 		// Arrange
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 		_factory.RegisterSerializer(options => new XmlSerializer(options));
+ 
+ 		// Act
+ 		var registeredTypes = _factory.GetRegisteredTypes();
+ 
+ 		// Assert
+ 		Assert.IsNotNull(registeredTypes);
+ 		Assert.IsTrue(registeredTypes.Contains(typeof(JsonSerializer)));
+ 		Assert.IsTrue(registeredTypes.Contains(typeof(XmlSerializer)));
+ 		Assert.AreEqual(2, registeredTypes.Count());
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests GetRegisteredTypes method returns empty collection when no types registered.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_GetRegisteredTypes_NoRegistrations_ReturnsEmpty()
+ 	{
+ 		// Act
+ 		var registeredTypes = _factory.GetRegisteredTypes();
+ 
+ 		// Assert
+ 		Assert.IsNotNull(registeredTypes);
+ 		Assert.AreEqual(0, registeredTypes.Count());
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests Unregister method.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Unregister_Success()
+ 	{
+ 		// Arrange
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 		Assert.IsTrue(_factory.IsRegistered<JsonSerializer>());
+ 
+ 		// Act
+ 		bool result = _factory.Unregister<JsonSerializer>();
+ 
+ 		// Assert
+ 		Assert.IsTrue(result);
+ 		Assert.IsFalse(_factory.IsRegistered<JsonSerializer>());
+ 		Assert.ThrowsException<InvalidOperationException>(() =>
+ 			_factory.Create<JsonSerializer>());
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests Unregister method with unregistered type returns false.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Unregister_UnregisteredType_ReturnsFalse()
+ 	{
+ 		// Act
+ 		bool result = _factory.Unregister<JsonSerializer>();
+ 
+ 		// Assert
+ 		Assert.IsFalse(result);
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests Clear method removes all registrations.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Clear_RemovesAllRegistrations()
+ 	{
+ 		// Arrange
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 		_factory.RegisterSerializer(options => new XmlSerializer(options));
+ 		Assert.IsTrue(_factory.IsRegistered<JsonSerializer>());
+ 		Assert.IsTrue(_factory.IsRegistered<XmlSerializer>());
+ 
+ 		// Act
+ 		_factory.Clear();
+ 
+ 		// Assert
+ 		Assert.IsFalse(_factory.IsRegistered<JsonSerializer>());
+ 		Assert.IsFalse(_factory.IsRegistered<XmlSerializer>());
+ 		Assert.AreEqual(0, _factory.GetRegisteredTypes().Count());
+ 	}
+ 
+ 	/// <summary>
+ 	/// Tests Count property.
+ 	/// </summary>
+ 	[TestMethod]
+ 	public void SerializerFactory_Count_ReturnsCorrectValue()
+ 	{
+ 		// Act & Assert
+ 		Assert.AreEqual(0, _factory.Count);
+ 
+ 		_factory.RegisterSerializer(options => new JsonSerializer(options));
+ 		Assert.AreEqual(1, _factory.Count);
+ 
+ 		_factory.RegisterSerializer(options => new XmlSerializer(options));
+ 		Assert.AreEqual(2, _factory.Count);
+ 
+ 		_factory.Unregister<JsonSerializer>();
+ 		Assert.AreEqual(1, _factory.Count);
+ 
+ 		_factory.Clear();
+ 		Assert.AreEqual(0, _factory.Count);
+ 	}
+ }
+ 
```

---



---

Read file: UniversalSerializer/Serialization/SerializerFactory.cs

---



---



---



---



---



---



---



---



---



---

Now let me add more comprehensive tests for the existing SerializerTests to cover edge cases and error scenarios:

---



---



---



---



---

Read file: UniversalSerializer.Test/SerializerTests.cs

---



---



---



---



---





---

